name: Deploy Only

on:
  push:
    branches: [ master, main ]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy:
    name: Deploy to Vercel
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master'
    
    steps:
      - name: Deploy Success
        run: |
          echo "ðŸš€ PolyCraft is deploying via Vercel GitHub integration"
          echo "ðŸ“ Live URL: https://poly-craft.vercel.app"
          echo "ðŸ”— API Health: https://poly-craft.vercel.app/api/health"
          echo "âœ… Deployment handled by Vercel automatically"
          echo "ðŸŽ¯ No complex CI needed - Vercel handles everything!"
      
      - name: Deployment Summary
        run: |
          echo "## ðŸŽ‰ PolyCraft Deployment" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### âœ… Live Application" >> $GITHUB_STEP_SUMMARY
          echo "- **Frontend**: [poly-craft.vercel.app](https://poly-craft.vercel.app)" >> $GITHUB_STEP_SUMMARY
          echo "- **API Health**: [/api/health](https://poly-craft.vercel.app/api/health)" >> $GITHUB_STEP_SUMMARY
          echo "- **Text Generation**: [/api/generate/text](https://poly-craft.vercel.app/api/generate/text)" >> $GITHUB_STEP_SUMMARY
          echo "- **Image Generation**: [/api/generate/image](https://poly-craft.vercel.app/api/generate/image)" >> $GITHUB_STEP_SUMMARY
          echo "- **Audio Generation**: [/api/generate/audio](https://poly-craft.vercel.app/api/generate/audio)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ“Š Info" >> $GITHUB_STEP_SUMMARY
          echo "- **Commit**: \`${{ github.sha }}\`" >> $GITHUB_STEP_SUMMARY
          echo "- **Branch**: ${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Time**: $(date -u)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸŽ¯ **Note**: Vercel handles build & deployment automatically via GitHub integration."